-- Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "TeleportGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î GUI
local ToggleButton = Instance.new("TextButton", ScreenGui)
ToggleButton.Size = UDim2.new(0, 120, 0, 40)
ToggleButton.Position = UDim2.new(0, 10, 0, 10)
ToggleButton.Text = "‡πÄ‡∏õ‡∏¥‡∏î GUI"
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
ToggleButton.TextColor3 = Color3.new(1,1,1)
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.TextSize = 18
Instance.new("UICorner", ToggleButton).CornerRadius = UDim.new(0, 8)

-- Frame GUI ‡∏´‡∏•‡∏±‡∏Å
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 250, 0, 120)
Frame.Position = UDim2.new(0.5, -125, 0.5, -60)
Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Frame.Active = true
Frame.Draggable = true
Frame.BorderSizePixel = 0
Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 12)

-- TextBox ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
local TextBox = Instance.new("TextBox", Frame)
TextBox.Size = UDim2.new(1, -20, 0, 40)
TextBox.Position = UDim2.new(0, 10, 0, 10)
TextBox.PlaceholderText = "‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô..."
TextBox.Text = ""
TextBox.ClearTextOnFocus = false
TextBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
TextBox.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", TextBox).CornerRadius = UDim.new(0, 8)

-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Å‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
local Button = Instance.new("TextButton", Frame)
Button.Size = UDim2.new(1, -20, 0, 40)
Button.Position = UDim2.new(0, 10, 0, 70)
Button.Text = "‡πÄ‡∏Å‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô"
Button.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
Button.TextColor3 = Color3.new(1,1,1)
Button.Font = Enum.Font.SourceSansBold
Button.TextSize = 20
Instance.new("UICorner", Button).CornerRadius = UDim.new(0, 8)

-- Toggle GUI
ToggleButton.MouseButton1Click:Connect(function()
	if Frame.Visible then
		Frame.Visible = false
		ToggleButton.Text = "‡πÄ‡∏õ‡∏¥‡∏î GUI"
	else
		Frame.Visible = true
		ToggleButton.Text = "‡∏õ‡∏¥‡∏î GUI"
	end
end)

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏≤ Player ‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠ (case-insensitive)
local function getPlayerByName(name)
	for _, player in pairs(Players:GetPlayers()) do
		if player.Name:lower() == name:lower() then
			if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
				return player
			end
		end
	end
	return nil
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏ô‡πà‡∏ô (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡πá‡∏ß)
local function stickToPlayer(targetPlayer)
	local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	local targetChar = targetPlayer.Character or targetPlayer.CharacterAdded:Wait()
	
	local myHRP = character:WaitForChild("HumanoidRootPart")
	local targetHRP = targetChar:WaitForChild("HumanoidRootPart")
	
	-- ‡∏õ‡∏¥‡∏î Collision ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏≤
	for _, part in pairs(character:GetDescendants()) do
		if part:IsA("BasePart") then
			part.CanCollide = false
		end
	end
	
	-- ‡∏™‡∏£‡πâ‡∏≤‡∏á BodyPosition + BodyGyro (‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏™‡∏π‡∏á)
	local bodyPos = Instance.new("BodyPosition", myHRP)
	bodyPos.MaxForce = Vector3.new(1e6,1e6,1e6)
	bodyPos.Position = targetHRP.Position + Vector3.new(0,0.5,0)
	bodyPos.D = 2000
	bodyPos.P = 200000  -- üî• ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤ P ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å
	
	local bodyGyro = Instance.new("BodyGyro", myHRP)
	bodyGyro.MaxTorque = Vector3.new(1e6,1e6,1e6)
	bodyGyro.CFrame = targetHRP.CFrame
	bodyGyro.D = 2000
	bodyGyro.P = 200000
	
	-- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏∏‡∏Å‡πÄ‡∏ü‡∏£‡∏°
	local conn
	conn = RunService.RenderStepped:Connect(function()
		if targetChar and targetChar:FindFirstChild("HumanoidRootPart") then
			bodyPos.Position = targetHRP.Position + Vector3.new(0,0.5,0)
			bodyGyro.CFrame = targetHRP.CFrame
		end
	end)
	
	-- ‡∏£‡∏≠‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ï‡∏≤‡∏¢
	targetChar:WaitForChild("Humanoid").Died:Wait()
	
	-- ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ Collision
	for _, part in pairs(character:GetDescendants()) do
		if part:IsA("BasePart") then
			part.CanCollide = true
		end
	end
	
	-- ‡∏•‡∏ö BodyPosition + BodyGyro ‡πÅ‡∏•‡∏∞ disconnect
	bodyPos:Destroy()
	bodyGyro:Destroy()
	conn:Disconnect()
end

-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î‡πÄ‡∏Å‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
Button.MouseButton1Click:Connect(function()
	local targetName = TextBox.Text
	local targetPlayer = getPlayerByName(targetName)
	if targetPlayer then
		task.spawn(function()
			stickToPlayer(targetPlayer)
		end)
	else
		warn("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î Character")
	end
end)
